<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body class="sr_btn">
<input>
<br/>
<br/>
<br/>
<br/>
<input id="upload" type="file" name="fileName" onchange="uploadKeyload(this)">
</body>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
    var _resources = [];
    /*$(function () {
        var scale1 = 60 / $('body').height();
        var scale2 = $('body').height() * 0.02 / $('body').height();
        $('.container').height((1 - (scale1 + scale2) * 2) * 100 + '%');
        var dataFormat = {'action': 'register', 'data': {'serverhost': '192.168.72.1'}};
        $.ajax({
            url: 'http://127.0.0.1:8080/',
            data: JSON.stringify(dataFormat),
            type:'post',
            contentType:'application/json',
            success: function (res) {
                if (result.success) {
                    _resources = result.data;
                    displayResource();
                } else {
                    $('.resource .res_list').append('加载查询资源失败！');
                }
            }

        })
    })
    $(".sr_btn").click(function () {
        // window.location = "search_list.html"
        var data = {
            'word': "1526262",
            'wordtype': "idcard",
            'jobtype': 1,
            'resources': [1, 2, 3]
        };
        $.ajax({
            url: "/api/createJob",
            type: "post",
            contentType: 'application/json',
            data: JSON.stringify(data),
            dataType: "json",
            success: function (result) {
                console.log(result)
                var jobinfo = result.data.jobinfo;
                var req = {"job":JSON.stringify(jobinfo),"res":JSON.stringify(_resources)}
                if (result.data.iscache) {
                    $.ajax({
                        url: 'main',
                        data: JSON.stringify(req),
                        type: 'post',
                        contentType: 'application/json',
                        success: function (res) {
                            window.location.href = "/main";
                        }
                    })
                } else {
                    callLocal(jobinfo, result.data['resources']);
                }
            }
        })
    });
    $("button").click(function () {
        $.ajax({
            type:"post",
            url:"/login.do?username=zkjl&password=123456",
            success:function (res) {
                console.log(res)
            }
        })
    })*/
    function uploadKeyload(e) {
        var formData = new FormData();
        formData.append("fileName",e.files[0]);
        $.ajax({
            url: "/api/file/upload",
            data: formData,
            type: "Post",
            dataType: "json",
            cache: false,//上传文件无需缓存
            processData: false,//用于对data参数进行序列化处理 这里必须false
            contentType: false, //必须
            success: function (result) {
                alert("上传" + (result.data == true ?"完成!":"失败!"));
            },
        })
    }

</script>
</html>